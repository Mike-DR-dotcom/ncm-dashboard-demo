<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCM Backup Review Dashboard</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/recharts@2.8.0/umd/Recharts.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        const { BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

        // Simple icon components using Unicode symbols (more reliable)
        const CheckCircle = ({ className }) => (
            <span className={`inline-block ${className}`} style={{fontSize: '20px'}}>✅</span>
        );
        const Target = ({ className }) => (
            <span className={`inline-block ${className}`} style={{fontSize: '20px'}}>🎯</span>
        );
        const Users = ({ className }) => (
            <span className={`inline-block ${className}`} style={{fontSize: '20px'}}>👥</span>
        );
        const AlertCircle = ({ className }) => (
            <span className={`inline-block ${className}`} style={{fontSize: '20px'}}>⚠️</span>
        );
        const Clock = ({ className }) => (
            <span className={`inline-block ${className}`} style={{fontSize: '20px'}}>⏰</span>
        );
        const Calendar = ({ className }) => (
            <span className={`inline-block ${className}`} style={{fontSize: '20px'}}>📅</span>
        );

        const TRANSLATIONS = {
            "projectDashboard": "Project Dashboard",
            "allTeamMembers": "All Team Members",
            "allPriorities": "All Priorities",
            "high": "High",
            "medium": "Medium",
            "low": "Low",
            "allStatus": "All Status",
            "completed": "Completed",
            "inProgress": "In Progress",
            "notStarted": "Not Started",
            "overallProgress": "Overall Progress",
            "activeTasks": "Active Tasks",
            "teamMembers": "Team Members",
            "activeMembers": "Active Members",
            "upcomingDeadlines": "Upcoming Deadlines",
            "next7Days": "Next 7 days",
            "taskTimeline": "Task Timeline",
            "teamWorkload": "Team Workload",
            "statusDistribution": "Status Distribution",
            "milestones": "Milestones",
            "noUpcomingDeadlines": "No upcoming deadlines in the next 7 days"
        };

        const t = (key) => TRANSLATIONS[key] || key;

        // Sample data for NCM Backup Review Project
        const sampleData = {
            projectName: "NCM Backup Review Project",
            tasks: [
                { 
                    id: 1, 
                    name: "Onboarding/Offboarding review", 
                    assignee: "Michael", 
                    deadline: "2025-07-15", 
                    status: "In Progress", 
                    priority: "High", 
                    progress: 65, 
                    start: "2025-06-15" 
                },
                { 
                    id: 2, 
                    name: "Backup Alerting Review", 
                    assignee: "NOC", 
                    deadline: "2025-08-01", 
                    status: "Not Started", 
                    priority: "Medium", 
                    progress: 0, 
                    start: "2025-07-20" 
                },
                { 
                    id: 3, 
                    name: "Reporting", 
                    assignee: "Michael", 
                    deadline: "2025-07-30", 
                    status: "In Progress", 
                    priority: "Medium", 
                    progress: 40, 
                    start: "2025-07-01" 
                }
            ],
            teamMembers: ["Michael", "Caylem", "NOC"],
            milestones: [
                { name: "Project Kickoff", date: "2025-06-15" },
                { name: "Onboarding Review Complete", date: "2025-07-15" },
                { name: "All Reviews Complete", date: "2025-08-01" },
                { name: "Final Report", date: "2025-08-15" }
            ]
        };

        const ProjectDashboard = () => {
            const [projectData, setProjectData] = React.useState(sampleData);
            const [filter, setFilter] = React.useState({ member: "", priority: "", status: "" });

            // Calculate overall progress
            const overallProgress = React.useMemo(() => {
                const completedTasks = projectData.tasks.filter(task => task.status === "Completed").length;
                return Math.round((completedTasks / projectData.tasks.length) * 100);
            }, [projectData.tasks]);

            // Filter tasks based on current filter
            const filteredTasks = React.useMemo(() => {
                return projectData.tasks.filter(task => {
                    return (
                        (filter.member === "" || task.assignee === filter.member) &&
                        (filter.priority === "" || task.priority === filter.priority) &&
                        (filter.status === "" || task.status === filter.status)
                    );
                });
            }, [projectData.tasks, filter]);

            // Prepare data for Gantt chart
            const ganttData = React.useMemo(() => {
                return filteredTasks.map(task => {
                    const startDate = new Date(task.start);
                    const endDate = new Date(task.deadline);
                    const projectStart = new Date("2025-06-15");
                    
                    const startDays = Math.floor((startDate - projectStart) / (1000 * 60 * 60 * 24));
                    const duration = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24));
                    const completedDays = Math.floor(duration * (task.progress / 100));
                    
                    return {
                        name: task.name,
                        assignee: task.assignee,
                        start: startDays,
                        duration: duration,
                        completed: completedDays,
                        progress: task.progress
                    };
                });
            }, [filteredTasks]);

            // Team workload data
            const workloadData = React.useMemo(() => {
                const workload = {};
                projectData.tasks.forEach(task => {
                    if (!workload[task.assignee]) {
                        workload[task.assignee] = { completed: 0, inProgress: 0, notStarted: 0 };
                    }
                    if (task.status === "Completed") workload[task.assignee].completed++;
                    else if (task.status === "In Progress") workload[task.assignee].inProgress++;
                    else workload[task.assignee].notStarted++;
                });
                
                return Object.entries(workload).map(([name, data]) => ({
                    name,
                    completed: data.completed,
                    inProgress: data.inProgress,
                    notStarted: data.notStarted,
                    total: data.completed + data.inProgress + data.notStarted
                }));
            }, [projectData.tasks]);

            // Upcoming deadlines (next 7 days)
            const upcomingDeadlines = React.useMemo(() => {
                const today = new Date();
                const nextWeek = new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000);
                
                return projectData.tasks
                    .filter(task => {
                        const deadline = new Date(task.deadline);
                        return deadline >= today && deadline <= nextWeek && task.status !== "Completed";
                    })
                    .sort((a, b) => new Date(a.deadline) - new Date(b.deadline));
            }, [projectData.tasks]);

            const statusData = [
                { name: 'Completed', value: projectData.tasks.filter(t => t.status === "Completed").length },
                { name: 'In Progress', value: projectData.tasks.filter(t => t.status === "In Progress").length },
                { name: 'Not Started', value: projectData.tasks.filter(t => t.status === "Not Started").length }
            ];

            return (
                <div className="min-h-screen bg-gray-50 p-8">
                    {/* Header */}
                    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
                        <h1 className="text-3xl font-bold text-gray-800">{projectData.projectName}</h1>
                        <p className="text-gray-600 mt-2">{t('projectDashboard')}</p>
                    </div>

                    {/* Filter Controls */}
                    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-8">
                        <div className="flex flex-wrap gap-4">
                            <select 
                                className="px-4 py-2 border rounded-md"
                                value={filter.member}
                                onChange={(e) => setFilter({...filter, member: e.target.value})}
                            >
                                <option value="">{t('allTeamMembers')}</option>
                                {projectData.teamMembers.map(member => (
                                    <option key={member} value={member}>{member}</option>
                                ))}
                            </select>
                            
                            <select 
                                className="px-4 py-2 border rounded-md"
                                value={filter.priority}
                                onChange={(e) => setFilter({...filter, priority: e.target.value})}
                            >
                                <option value="">{t('allPriorities')}</option>
                                <option value="High">High</option>
                                <option value="Medium">Medium</option>
                                <option value="Low">Low</option>
                            </select>
                            
                            <select 
                                className="px-4 py-2 border rounded-md"
                                value={filter.status}
                                onChange={(e) => setFilter({...filter, status: e.target.value})}
                            >
                                <option value="">{t('allStatus')}</option>
                                <option value="Completed">Completed</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Not Started">Not Started</option>
                            </select>
                        </div>
                    </div>

                    {/* Key Metrics */}
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-sm font-medium text-gray-600">{t('overallProgress')}</h3>
                                <CheckCircle className="w-5 h-5 text-green-500" />
                            </div>
                            <div className="mb-2">
                                <div className="text-2xl font-bold text-gray-800">{overallProgress}%</div>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                                <div 
                                    className="bg-green-500 h-2 rounded-full"
                                    style={{width: `${overallProgress}%`}}
                                ></div>
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-sm font-medium text-gray-600">{t('activeTasks')}</h3>
                                <Target className="w-5 h-5 text-blue-500" />
                            </div>
                            <div className="text-2xl font-bold text-gray-800">
                                {projectData.tasks.filter(t => t.status === "In Progress").length}
                            </div>
                            <div className="text-sm text-gray-500">In Progress</div>
                        </div>

                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-sm font-medium text-gray-600">{t('teamMembers')}</h3>
                                <Users className="w-5 h-5 text-purple-500" />
                            </div>
                            <div className="text-2xl font-bold text-gray-800">{projectData.teamMembers.length}</div>
                            <div className="text-sm text-gray-500">{t('activeMembers')}</div>
                        </div>

                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-sm font-medium text-gray-600">{t('upcomingDeadlines')}</h3>
                                <AlertCircle className="w-5 h-5 text-orange-500" />
                            </div>
                            <div className="text-2xl font-bold text-gray-800">{upcomingDeadlines.length}</div>
                            <div className="text-sm text-gray-500">{t('next7Days')}</div>
                        </div>
                    </div>

                    {/* Gantt Chart */}
                    <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8">
                        <h2 className="text-lg font-semibold text-gray-800 mb-4">{t('taskTimeline')}</h2>
                        <div style={{ overflowX: 'auto' }}>
                            <div style={{ width: '800px' }}>
                                <ResponsiveContainer width="100%" height={300}>
                                    <BarChart
                                        data={ganttData}
                                        layout="vertical"
                                        margin={{ top: 20, right: 30, left: 150, bottom: 5 }}
                                    >
                                        <CartesianGrid strokeDasharray="3 3" />
                                        <XAxis type="number" />
                                        <YAxis dataKey="name" type="category" width={140} />
                                        <Tooltip />
                                        <Bar dataKey="start" stackId="a" fill="transparent" />
                                        <Bar dataKey="completed" stackId="a" fill="#22c55e" name="Completed" />
                                        <Bar dataKey="duration" stackId="a" fill="#e5e7eb" name="Remaining" />
                                    </BarChart>
                                </ResponsiveContainer>
                            </div>
                        </div>
                    </div>

                    {/* Team Workload and Status Distribution */}
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <h2 className="text-lg font-semibold text-gray-800 mb-4">{t('teamWorkload')}</h2>
                            <ResponsiveContainer width="100%" height={300}>
                                <BarChart data={workloadData}>
                                    <CartesianGrid strokeDasharray="3 3" />
                                    <XAxis dataKey="name" />
                                    <YAxis />
                                    <Tooltip />
                                    <Legend />
                                    <Bar dataKey="completed" stackId="a" fill="#22c55e" name="Completed" />
                                    <Bar dataKey="inProgress" stackId="a" fill="#3b82f6" name="In Progress" />
                                    <Bar dataKey="notStarted" stackId="a" fill="#e5e7eb" name="Not Started" />
                                </BarChart>
                            </ResponsiveContainer>
                        </div>

                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <h2 className="text-lg font-semibold text-gray-800 mb-4">{t('statusDistribution')}</h2>
                            <ResponsiveContainer width="100%" height={300}>
                                <PieChart>
                                    <Pie
                                        data={statusData}
                                        cx="50%"
                                        cy="50%"
                                        outerRadius={100}
                                        fill="#8884d8"
                                        dataKey="value"
                                        label={(entry) => `${entry.name}: ${entry.value}`}
                                    >
                                        <Cell fill="#22c55e" />
                                        <Cell fill="#3b82f6" />
                                        <Cell fill="#e5e7eb" />
                                    </Pie>
                                    <Tooltip />
                                    <Legend />
                                </PieChart>
                            </ResponsiveContainer>
                        </div>
                    </div>

                    {/* Upcoming Deadlines and Milestones */}
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <h2 className="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <Clock className="w-5 h-5 mr-2 text-orange-500" />
                                {t('upcomingDeadlines')}
                            </h2>
                            <div className="space-y-3">
                                {upcomingDeadlines.length === 0 ? (
                                    <p className="text-gray-500">{t('noUpcomingDeadlines')}</p>
                                ) : (
                                    upcomingDeadlines.map(task => (
                                        <div key={task.id} className="flex items-center justify-between p-3 bg-gray-50 rounded">
                                            <div>
                                                <h4 className="font-medium text-gray-800">{task.name}</h4>
                                                <p className="text-sm text-gray-500">{task.assignee} • {task.deadline}</p>
                                            </div>
                                            <span className={`px-2 py-1 text-xs rounded ${
                                                task.priority === 'High' ? 'bg-red-100 text-red-800' :
                                                task.priority === 'Medium' ? 'bg-yellow-100 text-yellow-800' :
                                                'bg-green-100 text-green-800'
                                            }`}>
                                                {task.priority}
                                            </span>
                                        </div>
                                    ))
                                )}
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <h2 className="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <Calendar className="w-5 h-5 mr-2 text-purple-500" />
                                {t('milestones')}
                            </h2>
                            <div className="space-y-3">
                                {projectData.milestones.map((milestone, index) => (
                                    <div key={index} className="flex items-center">
                                        <div className="w-3 h-3 bg-purple-500 rounded-full mr-3"></div>
                                        <div>
                                            <h4 className="font-medium text-gray-800">{milestone.name}</h4>
                                            <p className="text-sm text-gray-500">{milestone.date}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ProjectDashboard />);
    </script>
</body>
</html>
